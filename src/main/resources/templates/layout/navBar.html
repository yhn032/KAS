<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<div class="content-navBar" th:fragment="navBar">
    <div class="content-nav">
        <nav>
            <ul>
                <li><a href="/common/dashboard">Home</a></li>
                <li class="has-asset-sub-menu"><a href="#">재고관리<span class="arrow-up"></span></a>
                    <ul class="asset-sub-menu">
                        <li><a href="/asset/allList">재고 검색</a></li>
                        <li><a href="/asset/addList">재고 등록</a></li>
                        <li><a href="/asset/shareList">반출 리스트</a></li>
                    </ul>
                </li>
                <li th:if="${#authorization.expression('hasRole(''SUPER'')')}"><a href="/teacher/manage">교사관리</a></li>
            </ul>
        </nav>
        <form class="controller" method="post" action="/logout">
            <p th:text="${username}">님</p>
            <button type="submit">Logout</button>
            <button type="button">MyPage</button>
        </form>
    </div>
    <div class="navBar-img">
        <div class="dashboard-mainText">
            <div class="row">
                <div class="col">
                    <h6 class="bubble-heading">I Love What I do</h6>
                    <h2 style="display: inline" class="special-heading text-container1">평화가 </h2>
                    <h2 style="display: inline" class="special-heading text-container2"><span class="rotating-text"></span></h2>
                    <h2 style="display: inline" class="special-heading text-container3">와 함께!</h2>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function(){
            const textArray = ["루카", "빅토리아", "레오", "릿다", "글라라"];
            let currentTextIndex = 0;
            let currentText = '';
            let isDeleting = false;
            let charIndex = 0;

            const typingText = $('.rotating-text');

            function type() {
                const text = textArray[currentTextIndex];
                currentText = isDeleting
                    ? text.substring(0, charIndex - 1)
                    : text.substring(0, charIndex + 1);

                typingText.text(currentText);

                if (isDeleting) {
                    charIndex--;
                } else {
                    charIndex++;
                }

                if (!isDeleting && currentText === text) {
                    isDeleting = true;
                    setTimeout(function() {
                        type();
                    }, 1500);
                } else if (isDeleting && currentText === '') {
                    isDeleting = false;
                    currentTextIndex = (currentTextIndex + 1) % textArray.length;
                    setTimeout(function() {
                        type();
                    }, 500);
                } else {
                    setTimeout(function() {
                        type();
                    }, isDeleting ? 100 : 200);
                }
            }

            // Initial setup
            type();


            /*const textArray = ["루카", "빅토리아", "레오", "릿다", "글라라"];
            let currentTextIndex = 0;
/!*
            const textContainer = $('.text-container2');*!/
            const newText = $('.rotating-text');

            function typeText(text){
                newText.text(text);
            }

            function startTypingAnimation() {
                newText.removeClass('typing-animation'); // Remove the class
                // Force reflow to restart the animation
                void newText[0].offsetWidth;

                // Apply animation again
                newText.addClass('typing-animation'); // Add the class again
            }

            function showNextText() {
                const nextText = textArray[currentTextIndex];
                typeText(nextText);
                startTypingAnimation();

                currentTextIndex = (currentTextIndex + 1) % textArray.length;
            }

            // Initial setup
            showNextText();

            // Set interval to show the next text
            setInterval(showNextText, 5000);*/


/*            textContainer.on('animationiteration', '.rotating-text', function() {
                // Remove the old text and append a new one on each animation iteration
                $(this).remove();
                // Append a new text from the array
                const nextText = newText.clone().text(textArray[currentTextIndex]);
                textContainer.append(nextText);

                // Update the current text index for the next iteration
                currentTextIndex = (currentTextIndex + 1) % textArray.length;
            });*/

        });
    </script>
</div>
</html>